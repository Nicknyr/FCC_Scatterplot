<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>

    <script src="https://d3js.org/d3.v5.min.js"></script>
    <!--<script src="https://gitcdn.link/repo/freeCodeCamp/testable-projects-fcc/master/build/bundle.js"></script>-->
    <script src="https://d3js.org/d3-time.v1.min.js"></script>
    <script src="https://d3js.org/d3-time-format.v2.min.js"></script>
    <svg width="960" height="500"></svg>

  </head>
  <style>

    body {
      text-align: center;
    }

  </style>
  <body>
  <script>



  var url = 'https://raw.githubusercontent.com/freeCodeCamp/ProjectReferenceData/master/cyclist-data.json';
  var times = [];
  var years = [];

  d3.json(url)
    .then(function(data){
      //console.log(data[0].Time);

      for(var i = 0; i < data.length; i++) {
        times.push(data[i].Time);
      }
      //console.log(times);

      for(var i = 0; i < data.length; i++) {
        years.push(data[i].Year);
      }
      //console.log(years);

      var svg = d3.select("svg"),
                margin = {top: 20, right: 20, bottom: 30, left: 50},
                width = +svg.attr("width") - margin.left - margin.right,
                height = +svg.attr("height") - margin.top - margin.bottom,
                g = svg.append("g").attr("transform", "translate(" + margin.left + "," + margin.top + ")");


      var x = d3.scaleTime()
                .range([0, width])

      var y = d3.scaleLinear()
                //.domain(d3.extent(parsedTime))
                .range([height, 0]);

      var specifier = "%M:%S";
      var parsedTime = times.map(function(d) {
        return d3.timeParse(specifier)(d)
      })


      x.domain(d3.extent(data, function(d) { return d.Year; }));
      //y.domain(d3.extent(data, function(d) { return parsedTime; }));

      // X Axis
      g.append("g")
        .attr("transform", "translate(0," + height + ")")
        .call(d3.axisBottom(x))
        //.tickValues(years)
        //.tickFormat(d3.time.format("%Y"));


      // Y Axis
      g.append("g")
        .call(d3.axisLeft(y))
      /*  .tickValues(parsedTime)
        .tickFormat(function(d, i) {
           return times[i]
        });
      */

      svg.selectAll("circle")
          .data(data)
          .enter()
          .append("circle")
          .attr("cx", function(d, i) {
            return d.Year[i];
          })
          .attr("cy", function(d, i) {
            return d.Time[i];
          })
          .attr("r", 20)
          .attr("fill", "red");

  });


  /*

    var w = 600;
    var h = 300;

  var dataset = [
    [256, 60], [480, 270], [250, 150], [100, 99], [330, 285],
    [410, 36], [475, 132], [25, 180], [85, 63], [220, 240]
  ];

  //Create SVG element
  var svg = d3.select("body")
    .append("svg")
    .attr("width", w)
    .attr("height", h);

  svg.selectAll("circle")
    .data(dataset)
    .enter()
    .append("circle")
    .attr("cx", function(d) {
      return d[0];
    })
    .attr("cy", function(d) {
      return d[1];
    })
    .attr("r", function(d) {
      return Math.sqrt(h - d[1]);
    })
    .attr("fill", "#00aa88");

  svg.selectAll("text")
    .data(dataset)
    .enter()
    .append("text")
    .text(function(d) {
      return d[0] + "," + d[1];
    })
    .attr("x", function(d) {
      return d[0];
    })
    .attr("y", function(d) {
      return d[1];
    })
    .attr("font-size", "15px")
    .attr("fill", "white");

    */


  </script>

  </body>
</html>
